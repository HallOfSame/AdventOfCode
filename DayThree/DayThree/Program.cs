using System;
using System.Collections.Generic;
using System.Linq;

namespace DayThree
{
    class Program
    {
        private static readonly List<string> input = new List<string>
                                                     {
                                                         "...#...#....#....##...###....#.",
                                                         "#.#...#...#....#.........#..#..",
                                                         ".#....##..#.#..##..##..........",
                                                         ".....#.#.............#..#......",
                                                         ".......#...#.##.#......#..#.#..",
                                                         "#.#....#......##........##.....",
                                                         ".....##.#....#..#...#...##...#.",
                                                         "...#...#..#.......#..#...##...#",
                                                         "..........#...........##.......",
                                                         "..#..#..#...................#..",
                                                         "#..#....#.....##.#.#..........#",
                                                         ".#.##.......###.....#.#...#....",
                                                         ".#..##....##....#.......#...###",
                                                         "#.#..##...#.#..#...............",
                                                         ".........#....#.......##.#.#...",
                                                         "...###...##....##...#..##.#..#.",
                                                         "....#.........#..#...#.......#.",
                                                         "....................#..#.#.#...",
                                                         "..#....#..........#...........#",
                                                         ".#.....#..#.....##........##..#",
                                                         "#..##..#...##............#..##.",
                                                         ".#..##....#..........#..#.##.#.",
                                                         "..#####..#.#............##.....",
                                                         "...###.#....##..#.#....#.....#.",
                                                         ".#.......##....#...#.#.....##..",
                                                         "...#....#...##.#...#..#........",
                                                         ".####.....#....#.#.#...#.......",
                                                         "...#....#.....#.......#........",
                                                         "#..#.#.......#...#............#",
                                                         "...#.....###.##....#.#.###.#...",
                                                         ".#.........#.......#.#....##...",
                                                         "#.#..#...#.#...##......#..#....",
                                                         ".....#...#..#.#...#..###..#....",
                                                         "......#.........#...###........",
                                                         ".....#..##...#..........#.....#",
                                                         "..#..#.#.##.#...#....#....##..#",
                                                         "##....#.##...#.##.#..##....#...",
                                                         ".....#.#.#.#..#....##.#...#.#..",
                                                         ".....##.......#........#.......",
                                                         "...#.#.....#...#...##.#......##",
                                                         "........#..#.#...#.#.....#.#..#",
                                                         "#..##...#.#...##..##...#.#...##",
                                                         ".##.#.#..#...#.....#.#.##.#...#",
                                                         ".#.####.........##.........#..#",
                                                         ".##..............#....#...#...#",
                                                         "......#...#..#...#..#..###.#...",
                                                         ".......##...#.#.#..##..#......#",
                                                         ".....#....#..##..#.........#...",
                                                         ".....#..#.#.#........#.#.####..",
                                                         "#..#.......###....##...........",
                                                         "#..##..........#.#......#.#....",
                                                         ".....##........#...#..##.......",
                                                         "###...#.##.#.#.#.#.##...##.....",
                                                         "....#...#........##.#.##..##...",
                                                         ".#..#.#.#......#.......##..#..#",
                                                         ".#...#.................#....#..",
                                                         ".##..#..........#..##.......#..",
                                                         ".#.#.#.....#..#.#.........##..#",
                                                         "...#......##...#.......#...##..",
                                                         "##...###....#.###.............#",
                                                         "#.....#.#..#.#..#........#.#.#.",
                                                         ".....#.#......##..#.#.....#.##.",
                                                         ".......#...........#..#.......#",
                                                         "..#....#.#.#......#.....#...#..",
                                                         ".....##........#..##..#..##....",
                                                         "#.#........#...##....#.#..##...",
                                                         "#......#......#....#..#...#.##.",
                                                         "....#.#.......#.#.#............",
                                                         "......####.#.##...#.#.##.....##",
                                                         "..###.#.#..#.........#.####....",
                                                         ".#.......#..#.#....#.#..#.#.##.",
                                                         "#....#....#............##...##.",
                                                         "....#....#............#....#..#",
                                                         "..#........#..#....#..#..#...#.",
                                                         ".#......##....#..........#....#",
                                                         "#.##.....#..........#.###.#....",
                                                         "....##...#.....#.#......#.##...",
                                                         "#.#.....#.......###.###..#..#.#",
                                                         "..###..##.............#.####.##",
                                                         "#....#.....#....#..##.......#..",
                                                         ".....#....#...#.#.#.#..#...#.##",
                                                         "...#.....#..#....###......#.#.#",
                                                         "##.........#.#..#..#.#..#.....#",
                                                         ".#.....#.#....#.........##..#.#",
                                                         ".#.#..#.###..#..#..........#...",
                                                         ".##....#.#.#...#......##.....#.",
                                                         "#.#....#....#...#...##...#..#..",
                                                         "#...#........#....#....#......#",
                                                         "#......#...#..#.#.##.....##..#.",
                                                         "....#...#......##...#..#....#..",
                                                         ".#......##.##.......#.......#..",
                                                         ".#...#..####...........#.#.#...",
                                                         ".........#...#.#.........#.....",
                                                         "#.##.....#.#..#.#.###...###..#.",
                                                         "#...##.###......#.###..##.#.##.",
                                                         "...##.#.....#....#..#......#...",
                                                         "#....###.#..#...##.....#......#",
                                                         "........###...#...#............",
                                                         "........#....#...#...#....#...#",
                                                         "#....#..#..#....#.#........#.#.",
                                                         "##...#.....#.#..........#..#..#",
                                                         "#.#...##.....#........#...#...#",
                                                         "##.#.#.......#...#..#.###....#.",
                                                         ".#.......#....##..##...#.....#.",
                                                         "#....#....#.....#.......#......",
                                                         ".##.##.##...##...#.#.#..#..#...",
                                                         "#..#..#.##....#......##....###.",
                                                         ".......#.#.........#..##.#...##",
                                                         ".#..##...#....#.....#..........",
                                                         "..#.#...#......#.#..#..........",
                                                         ".##....#.#.#.##.......###...#..",
                                                         "..##.#...#.#.#.#.......#..#....",
                                                         "#..#.......#...#........#.....#",
                                                         ".....#.......#......###..#.....",
                                                         "...##.#.......#.....##.....##..",
                                                         "##..#.......#.#.....#....#.....",
                                                         "..#....#.##.##...#...#......#..",
                                                         ".#..#.###.#....###........#...#",
                                                         "....##.##...##..#..#.#....#....",
                                                         "..###...##.....##..............",
                                                         "#....#...##...#....#..........#",
                                                         ".##........#......##...##...#.#",
                                                         "..#.#.##..........#......#.....",
                                                         "...#...#.........#.##........##",
                                                         "..#.#..#.#..#...#....#...#.....",
                                                         "...##...#..#.###.#..#.#...#....",
                                                         "....###........#..#..##...#....",
                                                         "#.#....##.......#.#........#...",
                                                         ".###...#..#.#.#.#..#...#..##.##",
                                                         "..#.........#####.#......#..#..",
                                                         "#.....#.....##..#....#...#...#.",
                                                         "...#..#....##....##.....##.#...",
                                                         ".........#............#.##.....",
                                                         "....##.#..#....#.##.......#..##",
                                                         ".###....#.#..#......#.#.......#",
                                                         ".###...###.#.........#.#..#...#",
                                                         ".....#........#..#.#..#.#..##.#",
                                                         ".###..#....##.........#..##....",
                                                         "..#.......#..#..##...#.###.#...",
                                                         "#.......#...........#.#...#.###",
                                                         "#.##.##...##.#...##..#.....#...",
                                                         "..#..#........###.#.....##.....",
                                                         "#.....##....#...##...####..#..#",
                                                         "....#........#...#...#.........",
                                                         "......#.#.#.#.......#..#.....##",
                                                         "..#..#....#.....#.#...##......#",
                                                         "..#....#...#.###.........#.###.",
                                                         "...#......##..#.#.....#...#....",
                                                         "...#.......#...#...#........##.",
                                                         "............#...#..#....#.....#",
                                                         "....##......................#..",
                                                         "#.#.#....#....#..........##....",
                                                         "#.#.....#.#.##..#...#.##....##.",
                                                         "...#...#..#...#..#.#.#.......#.",
                                                         "#.....#..........#.........##.#",
                                                         "#...##..#..#.#.......###....#..",
                                                         ".#...#..##....#.....##.......#.",
                                                         "....#.##.....#.........#.#....#",
                                                         "........#.#...####..#.......#.#",
                                                         ".####...#.#......####.....#.##.",
                                                         "###..#....#..#.......#.#..##..#",
                                                         "#......#.#....##..#.##.#....#.#",
                                                         "...###...#...#..##.#..#..#.#...",
                                                         "...##..##....#..#.....#........",
                                                         ".....#..............#......#..#",
                                                         "......#....#......#..#.........",
                                                         "#..#.....#.##...........##.....",
                                                         ".#..#.#..................##....",
                                                         "#.#..#..##...#....#.#......#...",
                                                         ".##.#.##......#.##...#...#...#.",
                                                         "..#...#.........#.#..#.#....#..",
                                                         ".#.####.#..#.#......##.#..#....",
                                                         "#..#.......#....#..............",
                                                         "....#............#..#..........",
                                                         ".....#####.....#.....#..##...##",
                                                         "#.#....#.#...............#..##.",
                                                         ".#.#..#...#......#.....#.#.#...",
                                                         ".#....#.#.#......#.....##....#.",
                                                         "....#....#.##..#.......###...##",
                                                         ".....#..#.##...#...#...#..#.#..",
                                                         "##..#........#.#..#..##......#.",
                                                         ".#..#..##.......#..#.....#.....",
                                                         ".#.#.....###..##.#.#...........",
                                                         "..##..##.####..........#..#....",
                                                         "..##..#..#...#....#......#.#...",
                                                         "#...#.#......##.....##.#..###..",
                                                         "#..#..............#........##.#",
                                                         ".........#.##..#.#..#..##.##.#.",
                                                         "#....##....#.#..#.#...##..#....",
                                                         ".#....#.......#............##..",
                                                         ".......#.#.......#...#.#......#",
                                                         "......##...#.......#.#........#",
                                                         "..###..#.#.##....##...#....##..",
                                                         "..##.##..........##..###.......",
                                                         ".#.#.#..#..#.#.......#.#...##..",
                                                         "..#..##.........#.###..#......#",
                                                         "....#.#.#...##.#...#...##..###.",
                                                         "..###..##.........##...#...#..#",
                                                         ".#..##...#.......#.......#..#.#",
                                                         "........##....##....#.#.###.#.#",
                                                         "#.....#.#.................#.#..",
                                                         "....#.#.#.....##.####.#......#.",
                                                         "....#.......#.#.##.##..........",
                                                         "...#...........#...#.##...#.###",
                                                         "#....#....#..........#.##......",
                                                         "##..#...........##.....##.##...",
                                                         ".#.##...##..##....#..#.....####",
                                                         "#...#...#.##..........##..##...",
                                                         "....##..#....#.....#.#...#....#",
                                                         "..#....#..##...###.#.#.........",
                                                         "#......#.#.#...#...#.........#.",
                                                         "#............###.#.#.#..##...#.",
                                                         ".##.....####...##..##..#..##.#.",
                                                         "#..#........#.....#.#.....#...#",
                                                         "#............#....#.#.#........",
                                                         "......##...##.#....#.....#...#.",
                                                         "..#........##......#.#.....##..",
                                                         ".#..#..#.....##.......#..#.#..#",
                                                         ".#....#..#....##.#.#.#..#..#.##",
                                                         ".####.#..........#...#..##.....",
                                                         "...###..###...##..#............",
                                                         "#..#.....##.#...#..##..#.......",
                                                         ".....##....#...###.##...#......",
                                                         "...##..#...#..#..##....##....#.",
                                                         "...###....#.###.#.#.##....#....",
                                                         "##.#.#.....#....#.#....#..#....",
                                                         ".......##.....#.#..##...##...#.",
                                                         ".#....#.#...##.#..#....#.....#.",
                                                         "..#...#..#...#.##........#...#.",
                                                         "#....#......##.#....##...#.#..#",
                                                         ".....#..#..#..#......#...#.#.#.",
                                                         "..###....#........#...#.......#",
                                                         "###...#.......#.#.......##.##..",
                                                         "......##.....#.#........#....#.",
                                                         "#.##..#.#.#.#..#....#.##.....#.",
                                                         "..........#.##.#...#...#..#..#.",
                                                         "..#...##.#..........#..##.###..",
                                                         "..###..##.##..#.#...##.####..#.",
                                                         "#.#.#...............##....###.#",
                                                         "....#.........#.#....#.#....#.#",
                                                         "..#...#.###...#....###.....#...",
                                                         "..#..#....#...#............#...",
                                                         ".#..#....#..##.....##..........",
                                                         "..#....#.#...#.#.#.#.......##.#",
                                                         ".........#....##........#.#....",
                                                         "...#..##.#..#.##...#...#.#....#",
                                                         "....####...#...####.#....###..#",
                                                         "......##...#.##.#.......#..#...",
                                                         "#.#...#.#...#.#...#....#.#.#...",
                                                         ".#.....##...#.....###.#....#...",
                                                         "......##.....###...#.#...#.#...",
                                                         "#..#..##.#.#......#....#..#..#.",
                                                         "....#.###.....#..#...#.##.....#",
                                                         "##.##........#......#....#..##.",
                                                         "##.....##.#.....#.....##.....#.",
                                                         ".....#.##...#.#..#.#.#.....#...",
                                                         ".#.##..#...#.#..#.....#.#......",
                                                         ".....##.......#..#...##..#..#..",
                                                         "#.....#..#.####......#........#",
                                                         ".#..#..##.#..##............#..#",
                                                         ".##..#.#....##.##.....#......#.",
                                                         ".......##.........#..#.........",
                                                         ".#...#.......................#.",
                                                         "#......#.#....##.#.......#..#..",
                                                         "..##..##......#.......#....#.#.",
                                                         "##......#......##...##.........",
                                                         "..#....####....#.#.....##.#.#..",
                                                         "..........#..#.#.#.....#..#.#..",
                                                         "##..##...........##.......#....",
                                                         "##....#.#....#..#......###....#",
                                                         "...#.#.#..#.......##.......#...",
                                                         "#....#.......#.......#.........",
                                                         "...##......##....#...#......#.#",
                                                         "#......#####.#.........#.....#.",
                                                         "#..#.............#..#....#...#.",
                                                         ".......#.##..#..#..#..#....####",
                                                         "......#.##..##..........###...#",
                                                         ".#.##....###..#........#....##.",
                                                         "#......#..#...###.#...#.....#..",
                                                         ".#.#.......#....##.......#.#...",
                                                         "..#.##..#..##.....#.........#.#",
                                                         "#.#...#..#.##....#.......##....",
                                                         ".#.....###....#.#..#...#.....#.",
                                                         "#...#..#.......#.#.....##...#.#",
                                                         "#.#####.........#....##.....#..",
                                                         "#....#..##...#....#.##.......#.",
                                                         ".#.#.........##....##....#.....",
                                                         "...#..##.......#....#.#.#......",
                                                         "#.###.##...###....#.....#.####.",
                                                         ".#...#.#.#..##.#..........#....",
                                                         "#.#.....#.##.#..####.....##.#..",
                                                         "...###.##..####.......#......##",
                                                         ".##..#.........#...#.#.....#.##",
                                                         "..#.....##....###.....#.#...##.",
                                                         "#....#....#..#....#.##.........",
                                                         "......###....#.#..#..#....##...",
                                                         ".#.#................#.......##.",
                                                         "...#.......#.........#.#.......",
                                                         "...#..........#...##.....###...",
                                                         "....#......#...#...............",
                                                         ".##...#....#.....#.##......#...",
                                                         ".#.....###...##..##...#.#......",
                                                         "....##........#.....#...#....#.",
                                                         "#.........#.#...##...#.#..#....",
                                                         "...#.#.....#.#........#.#....#.",
                                                         ".#........#.....#.#.#.#.#..#...",
                                                         "....#...#.....#.#....#........#",
                                                         "..###.#....#.#....##...##..#.##",
                                                         ".#....#.#.####.#.#.....#.......",
                                                         ".#...#...#.................##.#",
                                                         "..................##..#..#.#.#.",
                                                         ".#..#............##....###.....",
                                                         ".......#....#...........#......",
                                                         "....#.#.#.....###.........#..##",
                                                         "...#.#....#.#.##.#.##.....##..#",
                                                         ".#.##.#...##...#.......#.....##",
                                                         ".#............#...#..##...#.#.#",
                                                         "#.##..#.##..#..##.###.#........",
                                                         "..............##....#...#..#.#.",
                                                         ".#.#...#.#....#....###........#",
                                                         ".#....#.#....#......###........",
                                                         "..#.......##......#.##.....#...",
                                                         ".....#......#..#...#.#.....#..."
                                                     };

        private static readonly List<(int x, int y)> part2Slopes = new List<(int x, int y)>
                                                                   {
                                                                       (1, 1),
                                                                       (3, 1),
                                                                       (5, 1),
                                                                       (7, 1),
                                                                       (1, 2)
                                                                   };

        private static readonly int inputWidth = input[0]
            .Length;

        private static readonly int inputHeight = input.Count;

        private static bool IsTreeAtCoordinate(int x,
                                        int y)
        {
            while (x >= inputWidth)
            {
                // For the example it is 11 wide
                // So (11, 0) should be the same as (0, 0)
                // Keep dropping x until we get to our actual grid
                x = x - inputWidth;
            }

            var inputRow = input[y];
            var inputColumn = inputRow[x];

            return inputColumn == '#';
        }

        static void Main(string[] args)
        {
            // Part One
            var trees = GetNumberOfTreesPassed(3,
                                               1);

            Console.WriteLine($"PT1 Passed {trees} trees.");

            // Part Two
            // Decimal because int overflow
            var treeList = part2Slopes.Select(s => (decimal)GetNumberOfTreesPassed(s.x,
                                                                                   s.y))
                                      .ToList();

            var totalTrees = treeList.Aggregate(1m,
                                                (x,
                                                 y) => x * y);

            Console.WriteLine($"PT2 Multiplied trees: {totalTrees}.");
            Console.ReadKey();
        }

        private static int GetNumberOfTreesPassed(int xMov,
                                           int yMov)
        {
            var currentX = 0;
            var currentY = 0;

            var treesPassed = 0;

            while (currentY < inputHeight)
            {
                currentX += xMov;
                currentY += yMov;

                if (currentY > inputHeight - 1)
                {
                    break;
                }

                if (IsTreeAtCoordinate(currentX,
                                       currentY))
                {
                    treesPassed++;
                }
            }

            return treesPassed;
        }
    }
}
